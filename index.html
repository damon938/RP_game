<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Carte Joueur RPG</title>
<style>
  body {
    font-family: 'Poppins', sans-serif;
    background: radial-gradient(circle at center, #1c1c1c, #0a0a0a);
    color: #f5f5f5;
    text-align: center;
    padding: 20px;
  }
  h1 {
    color: #ffd700;
    text-shadow: 0 0 10px #ffd700;
  }
  .input-container {
    margin-bottom: 25px;
  }
  input {
    padding: 10px;
    font-size: 16px;
    width: 220px;
    border-radius: 8px;
    border: 2px solid #444;
    background: #111;
    color: #fff;
  }
  button {
    padding: 10px 15px;
    font-size: 16px;
    border-radius: 8px;
    background: #4CAF50;
    border: none;
    color: #fff;
    cursor: pointer;
  }
  button:hover {
    background: #45a049;
  }
  #error {
    color: #ff4d4d;
    margin-bottom: 10px;
  }
  .player-card {
    background: #222;
    border: 1px solid #555;
    border-radius: 15px;
    padding: 20px;
    max-width: 800px;
    margin: 0 auto;
    box-shadow: 0 0 20px rgba(0,0,0,0.6);
    display: none;
  }
  .player-card h2 {
    color: #00ffff;
    text-shadow: 0 0 10px #00ffff;
  }
  .row {
    display: flex;
    justify-content: space-between;
    flex-wrap: wrap;
    margin: 8px 0;
  }
  .col {
    flex: 1 1 30%;
    margin: 5px 0;
    min-width: 150px;
    text-align: left;
  }
  .col strong {
    color: #ffd700;
  }
</style>
</head>
<body>

<h1>üéñÔ∏è Carte du Joueur RPG üéñÔ∏è</h1>

<div class="input-container">
  <input type="text" id="playerId" placeholder="Entrez l'ID du joueur">
  <button onclick="getPlayer()">Chercher</button>
</div>

<div id="error"></div>
<div id="player" class="player-card"></div>

<script>
const apiUrl = 'https://sheetdb.io/api/v1/o0vmbzvmiboaz';

function safeValue(val) {
  return (val === undefined || val === null || val.toString().trim() === '') ? 'VIDE' : val;
}

function getPlayer() {
  const playerId = document.getElementById('playerId').value.trim();
  const playerDiv = document.getElementById('player');
  const errorDiv = document.getElementById('error');
  playerDiv.style.display = 'none';
  errorDiv.textContent = '';

  if (!playerId) {
    errorDiv.textContent = '‚ö†Ô∏è Veuillez entrer un ID.';
    return;
  }

  fetch(`${apiUrl}/search?id=${encodeURIComponent(playerId)}`)
    .then(res => res.json())
    .then(data => {
      if (!data || data.length === 0) {
        errorDiv.textContent = '‚ùå Joueur inconnu.';
        return;
      }

      const p = data[0];
      console.log('Donn√©es re√ßues :', p);

      // R√©cup√®re toutes les colonnes et s√©curise les valeurs
      const Nom = safeValue(p.Nom);
      const Race = safeValue(p.Race);
      const Classe = safeValue(p.Classe);
      const Niveau = safeValue(p.Niveau);
      const Rang = safeValue(p.Rang);
      const Argent = safeValue(p.Argent);
      const Victoires = safeValue(p.Victoires);
      const Defaites = safeValue(p.Defaites);
      const Quetes = safeValue(p.Quetes);
      const PV = safeValue(p.PV);
      const PM = safeValue(p.PM);
      const PF = safeValue(p.PF);
      const PE = safeValue(p.PE);
      const Vitesse = safeValue(p.Vitesse);
      const Competence = safeValue(p.Competence);
      const Attribut = safeValue(p.Attribut);
      const Familier = safeValue(p.Familier);
      const XP = safeValue(p.XP);

      playerDiv.innerHTML = `
        <h2>${Nom}</h2>
        <div class="row">
          <div class="col"><strong>Race:</strong> ${Race}</div>
          <div class="col"><strong>Classe:</strong> ${Classe}</div>
          <div class="col"><strong>Niveau:</strong> ${Niveau}</div>
        </div>
        <div class="row">
          <div class="col"><strong>Rang:</strong> ${Rang}</div>
          <div class="col"><strong>Argent:</strong> ${Argent}</div>
          <div class="col"><strong>XP:</strong> ${XP}</div>
        </div>
        <div class="row">
          <div class="col"><strong>Victoires:</strong> ${Victoires}</div>
          <div class="col"><strong>D√©faites:</strong> ${Defaites}</div>
          <div class="col"><strong>Qu√™tes:</strong> ${Quetes}</div>
        </div>
        <div class="row">
          <div class="col"><strong>Comp√©tence:</strong> ${Competence}</div>
          <div class="col"><strong>Attribut:</strong> ${Attribut}</div>
          <div class="col"><strong>Familier:</strong> ${Familier}</div>
        </div>
        <div class="row">
          <div class="col"><strong>PV:</strong> ${PV}</div>
          <div class="col"><strong>PM:</strong> ${PM}</div>
          <div class="col"><strong>PF:</strong> ${PF}</div>
          <div class="col"><strong>PE:</strong> ${PE}</div>
          <div class="col"><strong>Vitesse:</strong> ${Vitesse}</div>
        </div>
      `;

      playerDiv.style.display = 'block';
    })
    .catch(err => {
      console.error('Erreur fetch:', err);
      errorDiv.textContent = '‚ö†Ô∏è Erreur lors de la r√©cup√©ration des donn√©es.';
    });
}
</script>

</body>
</html>
