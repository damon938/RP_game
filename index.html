<script>
const apiUrl = 'https://sheetdb.io/api/v1/gejh59h045ck0';

function safeValue(val) {
  return (val === undefined || val === null || val.toString().trim() === '') ? 'VIDE' : val;
}

function getPlayer(playerId) {
  fetch(`${apiUrl}/search?id=${encodeURIComponent(playerId)}`)
    .then(res => res.json())
    .then(data => {
      if (!data || data.length === 0) {
        console.log('Joueur inconnu');
        return;
      }
      const p = data[0];

      console.log('Données reçues:', p);
      console.log('Toutes les clés reçues:', Object.keys(p));

      const Nom = safeValue(p.Nom);
      const Race = safeValue(p.Race);
      const Classe = safeValue(p.Classe);
      const Niveau = safeValue(p.Niveau);
      const Rang = safeValue(p.Rang);
      const Argent = safeValue(p.Argent);
      const Victoires = safeValue(p.Victoires);
      const Defaites = safeValue(p.Defaites);
      const Quetes = safeValue(p.Quetes);
      const PV = safeValue(p.PV);
      const PM = safeValue(p.PM);
      const PF = safeValue(p.PF);
      const PE = safeValue(p.PE);
      const Vitesse = safeValue(p.Vitesse);
      const Competence = safeValue(p.Competence);
      const Attribut = safeValue(p.Attribut);
      const Familier = safeValue(p.Familier);
      const XP = safeValue(p.XP);

      // Affichage stylé
      const html = `
        <h2>${Nom}</h2>
        <p>Race: ${Race} | Classe: ${Classe} | Niveau: ${Niveau} | Rang: ${Rang}</p>
        <p>Argent: ${Argent} | XP: ${XP}</p>
        <p>Victoires: ${Victoires} | Défaites: ${Defaites} | Quêtes: ${Quetes}</p>
        <p>Compétence: ${Competence} | Attribut: ${Attribut} | Familier: ${Familier}</p>
        <p>PV: ${PV} | PM: ${PM} | PF: ${PF} | PE: ${PE} | Vitesse: ${Vitesse}</p>
      `;
      document.getElementById('player').innerHTML = html;
      document.getElementById('player').style.display = 'block';
    })
    .catch(err => console.error('Erreur fetch:', err));
}

// Exemple
getPlayer('ARK001');
</script>
